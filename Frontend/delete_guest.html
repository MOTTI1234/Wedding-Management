<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ—‘ï¸ ××—×™×§×ª ××•×¨×— | WedManage</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #0A1121;
            --secondary-color: #16243D;
            --accent-color: #B8860B;
            --accent-light: #5c5f4d;
            --text-color: #EAECEF;
            --text-light: #A3B1C6;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            --hover-card: #1D3150;
            --border-radius: 12px;
            --input-bg: rgba(255,255,255,0.03);
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Heebo', sans-serif; background: linear-gradient(180deg, var(--primary-color) 0%, #07101A 100%); color: var(--text-color); min-height: 100vh; display: flex; flex-direction: column; }
        .header { width: 100%; padding: 20px 40px; background: var(--secondary-color); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.8); }
        .logo { font-size: 26px; font-weight: 800; color: var(--accent-light); letter-spacing: 2px; text-decoration: none; }
        .main { width: 100%; max-width: 600px; margin: 40px auto; padding: 0 20px; }
        .form-card { background: linear-gradient(135deg, var(--secondary-color) 0%, #0E2034 100%); padding: 30px; border-radius: var(--border-radius); box-shadow: var(--card-shadow); border-top: 3px solid var(--accent-color); }
        h1 { margin: 0 0 8px 0; font-size: 26px; color: var(--accent-light); }
        p { margin: 0 0 18px 0; color: var(--text-light); font-weight: 300; }
        form { display: grid; gap: 14px; }
        label { display: block; font-size: 13px; color: var(--text-light); margin-bottom: 6px; }
        input { width: 100%; padding: 12px 14px; background: var(--input-bg); color: var(--text-color); border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; outline: none; font-size: 15px; }
        input:focus { box-shadow: 0 6px 18px rgba(0,0,0,0.7); transform: translateY(-2px); }
        .actions { display:flex; gap:12px; margin-top: 6px; }
        .btn { padding: 12px 18px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; font-weight: 700; letter-spacing: 0.3px; }
        .btn-danger { background: #8b0000; color: var(--text-color); border-color: rgba(0,0,0,0.4); box-shadow: 0 8px 30px rgba(139,0,0,0.25); }
        .btn-ghost { background: transparent; color: var(--text-light); border: 1px solid rgba(255,255,255,0.06); }
    </style>
</head>
<body>
<header class="header">
    <a class="logo">WedManage</a>
    <button class="btn btn-ghost" onclick="history.back();"><i class="fas fa-arrow-right"></i>&nbsp; ×—×–×•×¨</button>
</header>

<main class="main">
    <section class="form-card">
        <h1>××—×™×§×ª ××•×¨×—</h1>
        <p>×”×›× ×¡ ××ª ×©× ×”××œ× ×•×”××™×™×œ ×©×œ ×”××•×¨×— ×©×ª×¨×¦×” ×œ××—×•×§ ××”×¨×©×™××”.</p>

        <form id="deleteForm" onsubmit="handleDelete(event)">
            <div>
                <label for="fullName">×©× ××œ× *</label>
                <input id="fullName" name="fullName" type="text" placeholder="×œ××©×œ: ×“×•×“ ×›×”×Ÿ" required />
            </div>

            <div>
                <label for="email">××™××™×™×œ *</label>
                <input id="email" name="email" type="email" placeholder="example@mail.com" required />
            </div>

            <div class="actions">
                <button type="submit" class="btn btn-danger"><i class="fas fa-user-times"></i>&nbsp; ××—×§ ××•×¨×—</button>
                <button type="button" class="btn btn-ghost" onclick="document.getElementById('deleteForm').reset();">× ×§×”</button>
            </div>

            <p class="small">* ×¤×¢×•×œ×” ×–×• ×ª××—×§ ××ª ×”××•×¨×— ×××¡×“ ×”× ×ª×•× ×™×.</p>
        </form>
    </section>
</main>

<script>
async function handleDelete(e) {
    e.preventDefault();
    const fullName = document.getElementById('fullName').value.trim();
    const email = document.getElementById('email').value.trim();

    if (!fullName || !email) {
        alert('× × ×œ×”×–×™×Ÿ ×©× ××œ× ×•××™××™×™×œ.');
        return;
    }

    try {
        const response = await fetch('http://localhost:3000/api/guests/delete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ fullName, email })
        });

        const data = await response.json();

        if (data.success) {
            alert(`×”××•×¨×— "${fullName}" × ××—×§ ×‘×”×¦×œ×—×”!`);
            document.getElementById('deleteForm').reset();
        } else {
            alert(`×©×’×™××”: ${data.message}`);
        }
    } catch (err) {
        console.error(err);
        alert('×©×’×™××” ×‘×©×¨×ª.');
    }
}
</script>
</body>
</html>
